<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ski 2025 ‚Äî Val Cenis</title>
  <meta name="theme-color" content="#f6f9ff" />
  <style>
    :root{
      --bg1:#f6f9ff;
      --bg2:#eef3ff;
      --card: rgba(255,255,255,.72);
      --card2: rgba(255,255,255,.88);
      --text: rgba(10,16,28,.92);
      --muted: rgba(10,16,28,.62);
      --line: rgba(10,16,28,.12);
      --accent: #5b8dff;
      --accent2:#ff5ea8;
      --radius: 18px;
      --shadow: 0 18px 45px rgba(12, 25, 55, .12);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1200px 700px at 12% 0%, rgba(91,141,255,.18), transparent 60%),
        radial-gradient(900px 600px at 88% 10%, rgba(255,94,168,.10), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* Snow */
    .snow{
      position:fixed; inset:0; pointer-events:none;
      background-image:
        radial-gradient(circle at 10% 20%, rgba(255,255,255,.95) 0 1px, transparent 2px),
        radial-gradient(circle at 30% 80%, rgba(255,255,255,.92) 0 1.2px, transparent 2.4px),
        radial-gradient(circle at 60% 30%, rgba(255,255,255,.88) 0 1px, transparent 2px),
        radial-gradient(circle at 80% 70%, rgba(255,255,255,.85) 0 1.4px, transparent 2.8px),
        radial-gradient(circle at 90% 10%, rgba(255,255,255,.90) 0 1px, transparent 2px);
      background-size: 260px 260px, 320px 320px, 280px 280px, 360px 360px, 300px 300px;
      animation: drift 14s linear infinite;
      opacity:.85;
      filter: blur(.2px);
      mix-blend-mode: screen;
    }
    @keyframes drift{
      from{ transform: translateY(-14px); }
      to{ transform: translateY(140px); }
    }

    .wrap{ max-width: 1100px; margin: 0 auto; padding: 16px; }

    .card{
      background: rgba(255,255,255,.62);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
      backdrop-filter: blur(8px);
    }

    /* Top title bar */
    .titlebar{
      padding: 14px 16px;
      text-align:center;
      font-weight: 950;
      letter-spacing: .6px;
      font-size: 20px;
      background: linear-gradient(180deg, rgba(255,255,255,.82), rgba(255,255,255,.62));
    }

    /* Members + countdown row */
    .row2{
      margin-top: 12px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      align-items: stretch;
    }
    @media (max-width: 820px){
      .row2{ grid-template-columns: 1fr; }
    }

    .sectionTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin: 0 0 10px;
      font-size: 12px;
      font-weight: 950;
      letter-spacing: .25px;
      color: rgba(10,16,28,.86);
      text-transform: uppercase;
    }

    .chips{ display:flex; flex-wrap:wrap; gap:8px; }
    .chip{
      font-size: 12px;
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(10,16,28,.10);
      font-weight: 900;
      color: rgba(10,16,28,.84);
    }

    .countdownBox{
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap: 10px;
    }
    .timer{
      display:flex;
      gap:12px;
      align-items:baseline;
      flex-wrap:wrap;
    }
    .big{ font-size: 28px; font-weight: 950; letter-spacing:.3px; }
    .small{ font-size: 12px; color: var(--muted); margin-left: 6px; font-weight: 900; }

    .progress{
      height: 9px;
      border-radius: 999px;
      background: rgba(10,16,28,.08);
      overflow:hidden;
      border: 1px solid rgba(10,16,28,.10);
    }
    .bar{
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, rgba(91,141,255,.95), rgba(255,94,168,.75));
      border-radius: 999px;
      transition: width .35s ease;
    }

    /* Buttons row */
    .buttonsRow{
      margin-top: 12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
    }
    button{
      appearance:none;
      border: 1px solid rgba(10,16,28,.14);
      background: rgba(255,255,255,.72);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 950;
      letter-spacing:.15px;
      cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
      font-size: 13px;
      box-shadow: 0 10px 25px rgba(12,25,55,.08);
    }
    button:hover{ background: rgba(255,255,255,.88); border-color: rgba(10,16,28,.22); }
    button:active{ transform: translateY(1px); }
    .primary{
      background: linear-gradient(135deg, rgba(91,141,255,.28), rgba(255,94,168,.16));
      border-color: rgba(10,16,28,.14);
    }

    /* Planning */
    .planningCard{ margin-top: 12px; }
    .planningGrid{
      display:grid;
      grid-template-columns: repeat(6, minmax(160px, 1fr));
      gap: 10px;
      overflow-x:auto;
      padding-bottom: 4px;
    }
    .dayCol{
      min-width: 160px;
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(10,16,28,.10);
      border-radius: 16px;
      padding: 10px;
    }
    .dayHead{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 8px;
    }
    .dayHead b{
      font-size: 13px;
      font-weight: 950;
      line-height: 1.15;
    }
    .date{
      display:block;
      margin-top: 4px;
      font-size: 12px;
      color: var(--muted);
      font-weight: 900;
    }
    .tag{
      font-size: 11px;
      padding: 6px 9px;
      border-radius: 999px;
      background: rgba(10,16,28,.06);
      border: 1px solid rgba(10,16,28,.10);
      color: rgba(10,16,28,.72);
      font-weight: 950;
      white-space:nowrap;
    }

    .slot{
      background: rgba(255,255,255,.86);
      border: 1px solid rgba(10,16,28,.10);
      border-radius: 14px;
      padding: 9px;
      margin-top: 8px;
    }
    .slotTitle{
      font-size: 11px;
      letter-spacing: .2px;
      text-transform: uppercase;
      font-weight: 950;
      color: rgba(10,16,28,.78);
      display:flex;
      align-items:center;
      gap: 8px;
      margin-bottom: 6px;
    }
    .slot ul{ margin:0 0 0 18px; padding:0; color: rgba(10,16,28,.86); }
    .slot li{ margin: 5px 0; font-size: 12.5px; }

    /* Bottom 3 zones */
    .bottom3{
      margin-top: 12px;
      display:grid;
      grid-template-columns: 1.1fr 1fr 1fr;
      gap: 12px;
      align-items: stretch;
    }
    @media (max-width: 980px){
      .bottom3{ grid-template-columns: 1fr; }
    }

    /* Shower table */
    .table{
      width:100%;
      border-collapse: collapse;
      overflow:hidden;
      border-radius: 14px;
      border: 1px solid rgba(10,16,28,.10);
      background: rgba(255,255,255,.72);
    }
    .table th, .table td{
      padding: 10px 10px;
      border-bottom: 1px solid rgba(10,16,28,.08);
      vertical-align: top;
      font-size: 12.5px;
    }
    .table th{
      text-align:left;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing:.25px;
      color: rgba(10,16,28,.72);
      background: rgba(255,255,255,.82);
    }
    .orderLine{
      color: rgba(10,16,28,.86);
      font-weight: 850;
    }

    /* Photo zone */
    .photoWrap{
      display:flex;
      flex-direction:column;
      gap:10px;
      height: 100%;
    }
    .photoFrame{
      width:100%;
      aspect-ratio: 16/11;
      border-radius: 16px;
      overflow:hidden;
      border: 1px solid rgba(10,16,28,.10);
      background: rgba(255,255,255,.80);
      position: relative;
    }
    .photoFrame img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }
    .photoCap{
      position:absolute;
      left:10px; right:10px; bottom:10px;
      padding: 8px 10px;
      border-radius: 14px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(10,16,28,.10);
      font-size: 12px;
      color: rgba(10,16,28,.78);
      font-weight: 900;
      backdrop-filter: blur(6px);
    }

    /* Shopping list */
    .shopping ul{ margin: 0 0 0 18px; padding:0; }
    .shopping li{ margin: 7px 0; font-size: 13px; }

    /* Modals */
    .modalbackdrop{
      position:fixed; inset:0;
      background: rgba(10,16,28,.42);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 50;
      backdrop-filter: blur(6px);
    }
    .modalbackdrop.open{ display:flex; }
    .modal{
      width: min(780px, 100%);
      max-height: min(86vh, 900px);
      overflow:auto;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(10,16,28,.14);
      border-radius: 20px;
      box-shadow: 0 25px 80px rgba(12,25,55,.18);
      padding: 14px;
    }
    .modalheader{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 10px;
      border-bottom: 1px solid rgba(10,16,28,.10);
      padding-bottom: 10px;
    }
    .modalheader h3{ margin:0; font-size: 14px; font-weight: 950; letter-spacing:.2px; }
    .subtle{ color: var(--muted); font-size: 12.5px; line-height: 1.45; margin: 0 0 10px; }
    .close{ border-radius: 14px; padding: 8px 10px; font-weight: 950; }
    .sections{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 720px){ .sections{ grid-template-columns: 1fr; } }
    .box{
      background: rgba(255,255,255,.86);
      border: 1px solid rgba(10,16,28,.10);
      border-radius: 16px;
      padding: 12px;
    }
    .box h4{ margin:0 0 8px; font-size: 12.5px; color: rgba(10,16,28,.90); font-weight: 950; }
    .box ul{ margin:0 0 0 18px; padding:0; }
    .box li{ margin: 6px 0; font-size: 13px; }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(10,16,28,.14);
      padding: 10px 12px;
      border-radius: 14px;
      box-shadow: 0 18px 55px rgba(12,25,55,.18);
      color: var(--text);
      font-weight: 950;
      font-size: 13px;
      opacity: 0;
      pointer-events:none;
      transition: opacity .25s ease, transform .25s ease;
      z-index: 60;
    }
    .toast.show{ opacity:1; transform: translateX(-50%) translateY(-4px); }
  </style>
</head>

<body>
  <div class="snow" aria-hidden="true"></div>

  <div class="wrap">

    <!-- 1) Title -->
    <div class="card titlebar" id="topTitle">Ski 2025</div>

    <!-- 2) Members + Countdown -->
    <div class="row2">
      <section class="card">
        <div class="sectionTitle">
          <span>Membres</span>
          <span style="font-weight:900;color:rgba(10,16,28,.55);font-size:12px;">Val Cenis</span>
        </div>
        <div class="chips" id="members"></div>
      </section>

      <section class="card countdownBox">
        <div class="sectionTitle">
          <span>Compte √† rebours</span>
          <span style="font-weight:900;color:rgba(10,16,28,.55);font-size:12px;" id="countNote"></span>
        </div>
        <div class="timer">
          <div><span class="big" id="d">‚Äî</span><span class="small">jours</span></div>
          <div><span class="big" id="h">‚Äî</span><span class="small">heures</span></div>
          <div><span class="big" id="m">‚Äî</span><span class="small">min</span></div>
        </div>
        <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
      </section>
    </div>

    <!-- 3) Buttons -->
    <div class="buttonsRow">
      <button class="primary" data-open="modalChecklist">‚úÖ Checklists</button>
      <button data-open="modalLogement">üè† Logement</button>
      <button data-open="modalTransport">üöó Transport</button>
    </div>

    <!-- 4) Planning -->
    <section class="card planningCard">
      <div class="sectionTitle" style="margin-bottom:12px;">
        <span>Planning (jusqu‚Äôau 1er janvier)</span>
        <span style="font-weight:900;color:rgba(10,16,28,.55);font-size:12px;">Cuisine / M√©nage / Activit√©s</span>
      </div>
      <div class="planningGrid" id="planning"></div>
    </section>

    <!-- 5) Bottom 3 zones -->
    <div class="bottom3">
      <section class="card">
        <div class="sectionTitle">
          <span>Ordre douche</span>
          <span style="font-weight:900;color:rgba(10,16,28,.55);font-size:12px;">rotation</span>
        </div>
        <table class="table" id="showerTable"></table>
      </section>

      <section class="card">
        <div class="sectionTitle">
          <span>Photos</span>
          <span style="font-weight:900;color:rgba(10,16,28,.55);font-size:12px;">change / 2 min</span>
        </div>
        <div class="photoWrap">
          <div class="photoFrame">
            <img id="photo" alt="Photo du s√©jour" />
            <div class="photoCap" id="photoCap">‚Äî</div>
          </div>
          <div class="subtle" style="margin:0">
            Modifie le tableau <b>PHOTOS</b> dans le code (URLs).
          </div>
        </div>
      </section>

      <section class="card shopping">
        <div class="sectionTitle">
          <span>Liste de courses</span>
          <span style="font-weight:900;color:rgba(10,16,28,.55);font-size:12px;">√† acheter</span>
        </div>
        <ul id="shoppingList"></ul>
      </section>
    </div>
  </div>

  <!-- MODALS -->
  <div class="modalbackdrop" id="modalChecklist" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Checklists">
      <div class="modalheader">
        <div>
          <h3>Checklists</h3>
          <div class="subtle" style="margin:6px 0 0">√Ä lire (pas une to-do).</div>
        </div>
        <button class="close" data-close>‚úï</button>
      </div>
      <div class="sections" id="checklistsContent"></div>
      <div class="subtle" style="margin:10px 0 0;border-top:1px solid rgba(10,16,28,.10);padding-top:10px;">
        Astuce : capture d‚Äô√©cran ‚Üí groupe.
      </div>
    </div>
  </div>

  <div class="modalbackdrop" id="modalLogement" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Logement">
      <div class="modalheader">
        <div>
          <h3>Logement</h3>
          <div class="subtle" style="margin:6px 0 0">Adresse & contact.</div>
        </div>
        <button class="close" data-close>‚úï</button>
      </div>
      <div class="sections" id="logementContent"></div>
    </div>
  </div>

  <div class="modalbackdrop" id="modalTransport" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Transport">
      <div class="modalheader">
        <div>
          <h3>Transport</h3>
          <div class="subtle" style="margin:6px 0 0">Drivers & passagers.</div>
        </div>
        <button class="close" data-close>‚úï</button>
      </div>
      <div class="sections" id="transportContent"></div>
    </div>
  </div>

  <script>
    // ==========================================================
    // CONFIG (modifie ici)
    // ==========================================================
    const TRIP = {
      titleTop: "üèÇ Ski 2025 Val Cenis ‚õ∑Ô∏è",
      station: "Val Cenis",
      start: "2025-12-27T04:00:00+01:00",
      end:   "2026-01-03T18:00:00+01:00",
    };

    const MEMBERS = ["Gabriel", "Sia", "Chobin", "Chlo√©", "Gustavo", "Lucie", "Matthieu"];

    // On s'arr√™te au 1er janvier inclus (6 jours)
    // Chaque jour : cook[], clean[], activities[]
    const DAYS = [
      { day: "Jour 1", date: "27 d√©c", cook: ["Gab & Sia & Chobin"], clean: ["Gus & Chlo√©"], activities: ["Trajet", "Courses", "Check-in", "Pr√©parer l'appart"] },
      { day: "Jour 2", date: "28 d√©c", cook: ["Gus & Chlo√©"], clean: ["Gab & Sia & Chobin"], activities: ["Balade / rando", "Soir√©e jeux"] },
      { day: "Jour 3", date: "29 d√©c", cook: ["Gab & Sia & Chobin"], clean: ["Gus & Chlo√©"], activities: ["Initiation Ski/Snowboard", "Soir√©e jeux"] },
      { day: "Jour 4", date: "30 d√©c", cook: ["Gus & Chlo√©"], clean: ["Gab & Sia & Chobin"], activities: ["Ski / Snowboard","Balade"] },
      { day: "Jour 5", date: "31 d√©c", cook: ["Maman"], clean: ["Gab"], activities: ["Ski / Snowboard", "Courses r√©veillon", "Maman & Matthieu arrivent", "R√©veillon üéâ"] },
      { day: "Jour 6", date: "1 jan", cook: ["Maman"], clean: ["Gus"], activities: ["Brunch tard", "Repos / ski light", "Chobin & Sia repartent"] },
    ];

    // Ordre douche: rotation journali√®re
    const SHOWER_BASE = ["Gustavo", "Gabriel", "Chlo√©", "Chobin", "Sia"];

    // Photos (change toutes les 2 minutes)
    // Tu peux remplacer par tes propres URLs (Drive, Imgur, etc.)
    const PHOTOS = [
      { url: "https://skipass.fr/p/liveposts/2/4/245908/84622_84622-1.jpg", caption: "Lac du Mont Cenis" },
      { url: "https://www.haute-maurienne-vanoise.com/content/uploads/sites/5/2025/08/2500x1500-HomePage_VC_Hiver_02.jpg", caption: "Lanslevillard" },
      { url: "https://epp38rd5sm9.exactdn.com/wp-content/uploads/2016/12/val_cenis_haute_maurienne_vanoise_canopee_des_cimes_12-2016-1024x768.jpg?strip=all&quality=65", caption: "Lac du Mont Cenis" },
    ];

    const SHOPPING = [
      "P√¢tes / riz + sauces",
      "Petit-d√©j (c√©r√©ales, pain, confiture, ≈ìufs)",
      "Snacks pour le go√ªter (barres, chocolat)",
      "Eau (robinet √ßa va )/ boissons",
      "L√©gumes ^^",
      "De quoi faire des sandwichs",
      "Papier toilette / sopalin",
      "√âponges + liquide vaisselle",
      "Sacs poubelle",
    ];

    const CHECKLISTS = [
      { title: "Mat√©riel & v√™tements", items: [
        "Casque", "Masque / lunettes", "Gants (id√©alement 2 paires)", "Bonnet", "Tour de cou",
        "Veste + pantalon de ski", "Sous-couches", "Chaussettes ski (x3+)",
        "Cr√®me solaire + stick l√®vres", "Chargeurs"
      ]},
      { title: "Admin / important", items: [
        "Carte d‚Äôidentit√© / permis", "CB + un peu de cash"
      ]},
      { title: "En arrivant", items: [
        "R√©cup√©rer les cl√©s", "√âtat des lieux", "Check Wi-Fi"
      ]},
    ];

    const LOGEMENT = {
      "Adresse": "Les Balcons de Val Cenis Le Haut 188, rue sur L√©va, 73480 VAL CENIS LANSLEVILLARD",
      "T√©l√©phone": "0671897017",
      "Email": "nurisso.sylvie@gmail.com",
      "Site": "gite-la-vachette-45.webself.net",
      "Notes": [
        "Garder ces infos √† port√©e (arriv√©e tardive, souci de cl√©s, etc.)", "630‚Ç¨ restant √† r√©gler"
      ]
    };

    const TRANSPORT = [
      { title: "Drivers", items: ["Gabriel", "Gustavo"] },
      { title: "Passagers", items: ["Sia", "Chobin", "Chlo√©"] },
    ];

    // ==========================================================
    // Helpers
    // ==========================================================
    const $ = (s) => document.querySelector(s);
    const $$ = (s) => Array.from(document.querySelectorAll(s));
    function esc(s){
      return String(s)
        .replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")
        .replaceAll('"',"&quot;").replaceAll("'","&#039;");
    }

    // ==========================================================
    // Render
    // ==========================================================
    function renderTop(){
      $("#topTitle").textContent = TRIP.titleTop;
      $("#countNote").textContent = TRIP.station;
      const m = $("#members");
      m.innerHTML = MEMBERS.map(n => `<span class="chip">${esc(n)}</span>`).join("");
    }

    function renderPlanning(){
      const p = $("#planning");
      p.innerHTML = "";
      DAYS.forEach(d => {
        const col = document.createElement("div");
        col.className = "dayCol";
        col.innerHTML = `
          <div class="dayHead">
            <b>${esc(d.day)}<span class="date">${esc(d.date)}</span></b>
            <span class="tag">${esc(d.day)}</span>
          </div>

          <div class="slot">
            <div class="slotTitle">üç≥ Cuisine</div>
            <ul>${(d.cook||[]).map(x=>`<li>${esc(x)}</li>`).join("")}</ul>
          </div>

          <div class="slot">
            <div class="slotTitle">üßΩ M√©nage</div>
            <ul>${(d.clean||[]).map(x=>`<li>${esc(x)}</li>`).join("")}</ul>
          </div>

          <div class="slot">
            <div class="slotTitle">üéø Activit√©s</div>
            <ul>${(d.activities||[]).map(x=>`<li>${esc(x)}</li>`).join("")}</ul>
          </div>
        `;
        p.appendChild(col);
      });
    }

    function rotate(arr, k){
      const n = arr.length;
      const kk = ((k % n) + n) % n;
      return arr.slice(kk).concat(arr.slice(0, kk));
    }

    function renderShower(){
      const t = $("#showerTable");
      t.innerHTML = `
        <tr>
          <th style="width:90px;">Jour</th>
          <th>Ordre</th>
        </tr>
      `;

      DAYS.forEach((d, i) => {
        const order = rotate(SHOWER_BASE, i).join(" ‚Üí ");
        t.innerHTML += `
          <tr>
            <td><b>${esc(d.day)}</b><div style="color:rgba(10,16,28,.55);font-weight:850;font-size:12px;margin-top:2px">${esc(d.date)}</div></td>
            <td class="orderLine">${esc(order)}</td>
          </tr>
        `;
      });
    }

    function renderShopping(){
      const ul = $("#shoppingList");
      ul.innerHTML = SHOPPING.map(x=>`<li>${esc(x)}</li>`).join("");
    }

    function renderChecklistModal(){
      const c = $("#checklistsContent");
      c.innerHTML = "";
      CHECKLISTS.forEach(sec => {
        const box = document.createElement("div");
        box.className = "box";
        box.innerHTML = `<h4>${esc(sec.title)}</h4><ul>${sec.items.map(x=>`<li>${esc(x)}</li>`).join("")}</ul>`;
        c.appendChild(box);
      });
    }

    function renderLogementModal(){
      const c = $("#logementContent");
      c.innerHTML = "";

      const left = document.createElement("div");
      left.className = "box";
      left.innerHTML = `
        <h4>Infos</h4>
        <ul>
          <li><b>Adresse</b> : ${esc(LOGEMENT["Adresse"] || "‚Äî")}</li>
          <li><b>T√©l√©phone</b> : ${esc(LOGEMENT["T√©l√©phone"] || "‚Äî")}</li>
          <li><b>Email</b> : ${esc(LOGEMENT["Email"] || "‚Äî")}</li>
          <li><b>Site</b> : ${esc(LOGEMENT["Site"] || "‚Äî")}</li>
        </ul>
      `;

      const right = document.createElement("div");
      right.className = "box";
      const notes = Array.isArray(LOGEMENT["Notes"]) ? LOGEMENT["Notes"] : [];
      right.innerHTML = `<h4>Notes</h4><ul>${notes.map(x=>`<li>${esc(x)}</li>`).join("") || "<li>‚Äî</li>"}</ul>`;

      c.appendChild(left);
      c.appendChild(right);
    }

    function renderTransportModal(){
      const c = $("#transportContent");
      c.innerHTML = "";
      TRANSPORT.forEach(sec => {
        const box = document.createElement("div");
        box.className = "box";
        box.innerHTML = `<h4>${esc(sec.title)}</h4><ul>${sec.items.map(x=>`<li>${esc(x)}</li>`).join("")}</ul>`;
        c.appendChild(box);
      });
    }

    // ==========================================================
    // Countdown
    // ==========================================================
    function initCountdown(){
      const start = new Date(TRIP.start);
      const end = new Date(TRIP.end);

      function tick(){
        const now = new Date();
        const diff = start - now;

        const days = Math.max(0, Math.floor(diff / (1000*60*60*24)));
        const hours = Math.max(0, Math.floor((diff / (1000*60*60)) % 24));
        const mins = Math.max(0, Math.floor((diff / (1000*60)) % 60));

        $("#d").textContent = String(days);
        $("#h").textContent = String(hours).padStart(2,"0");
        $("#m").textContent = String(mins).padStart(2,"0");

        const total = Math.max(1, (end - start));
        const elapsed = (now - start);
        const p = Math.min(1, Math.max(0, elapsed / total));
        $("#bar").style.width = (p*100).toFixed(1) + "%";
      }
      tick();
      setInterval(tick, 10_000);
    }

    // ==========================================================
    // Photos slideshow (2 minutes)
    // ==========================================================
    function initPhotos(){
      let i = 0;
      const img = $("#photo");
      const cap = $("#photoCap");

      function show(idx){
        if(!PHOTOS.length){
          img.removeAttribute("src");
          cap.textContent = "Ajoute des photos dans PHOTOS[]";
          return;
        }
        const p = PHOTOS[idx % PHOTOS.length];
        img.src = p.url;
        cap.textContent = p.caption || `Photo ${idx+1}`;
      }

      show(i);
      setInterval(() => {
        i = (i + 1) % Math.max(1, PHOTOS.length);
        show(i);
      }, 120_000);
    }

    // ==========================================================
    // Modals
    // ==========================================================
    function openModal(id){
      const m = document.getElementById(id);
      if(!m) return;
      m.classList.add("open");
      m.setAttribute("aria-hidden","false");
      const closeBtn = m.querySelector("[data-close]");
      closeBtn && closeBtn.focus();
    }
    function closeModal(modalEl){
      modalEl.classList.remove("open");
      modalEl.setAttribute("aria-hidden","true");
    }
    document.addEventListener("click", (e) => {
      const open = e.target.closest("[data-open]");
      if(open){ openModal(open.getAttribute("data-open")); return; }

      const close = e.target.closest("[data-close]");
      if(close){
        const modal = e.target.closest(".modalbackdrop");
        if(modal) closeModal(modal);
        return;
      }

      const backdrop = e.target.classList.contains("modalbackdrop") ? e.target : null;
      if(backdrop && backdrop.classList.contains("open")) closeModal(backdrop);
    });
    document.addEventListener("keydown", (e) => {
      if(e.key === "Escape") $$(".modalbackdrop.open").forEach(closeModal);
    });


    // Boot
    renderTop();
    renderPlanning();
    renderShower();
    renderShopping();
    renderChecklistModal();
    renderLogementModal();
    renderTransportModal();
    initCountdown();
    initPhotos();
  </script>
</body>
</html>
